{% extends "base.html" %}
{% block content %}
<section class="page-head">
  <div>
    <h1>Overview</h1>
    <p>Quick view of devices, licenses, and installs.</p>
  </div>
  <div class="pill">Local Mode</div>
</section>

<section class="stats-grid">
  <div class="card stat-card">
    <div class="stat-label">Total Devices</div>
    <div class="stat-value">{{ devices_count }}</div>
  </div>
  <div class="card stat-card">
    <div class="stat-label">Active Licenses</div>
    <div class="stat-value">{{ licenses_count }}</div>
  </div>
  <div class="card stat-card">
    <div class="stat-label">Installs</div>
    <div class="stat-value">{{ installs_count }}</div>
  </div>
</section>

<section class="card table-card">
  <div class="card-head">
    <h2>Recent Devices</h2>
    <a class="link" href="/devices">View all</a>
  </div>
  <div class="table-wrap">
    <table>
      <thead>
        <tr>
          <th>Device ID</th>
          <th>License</th>
          <th>IP</th>
          <th>App</th>
          <th>Model</th>
          <th>Last Seen</th>
        </tr>
      </thead>
      <tbody>
        {% for device in recent_devices %}
        <tr>
          <td>{{ device.device_id }}</td>
          <td>{{ device.license_code }}</td>
          <td>{{ device.ip or '-' }}</td>
          <td>{{ device.app_version or '-' }}</td>
          <td>{{ device.model or '-' }}</td>
          <td>{{ device.last_seen_at }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
